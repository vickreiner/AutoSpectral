<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Define Flow Control — define.flow.control • AutoSpectral</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Define Flow Control — define.flow.control"><meta property="og:description" content="A complex function designed to convert the single-stained control FCS files
and the metadata control.def.file into a data structure for AutoSpectral.
It reads the metadata file, locates the corresponding FCS files, determines
the gates needed based on variables such as beads or cells, large.gate, and
viability.gate, and then creates gates for each combination. It imports
and gates the data in the FCS files and assigns various factors to track
the data."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AutoSpectral</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Aurora_example.html">Aurora_example</a>
    </li>
    <li>
      <a href="../articles/Cleaning.html">Cleaning</a>
    </li>
    <li>
      <a href="../articles/Control_File_example.html">Control_File_example</a>
    </li>
    <li>
      <a href="../articles/Development.html">Development</a>
    </li>
    <li>
      <a href="../articles/Full_AutoSpectral_Workflow.html">Full Workflow Example</a>
    </li>
    <li>
      <a href="../articles/Gating.html">Gating</a>
    </li>
    <li>
      <a href="../articles/Per_Cell_Optimization.html">Per Cell Optimization</a>
    </li>
    <li>
      <a href="../articles/Plotting.html">Plotting</a>
    </li>
    <li>
      <a href="../articles/Reload_AutoSpectral.html">Re-running_AutoSpectral</a>
    </li>
    <li>
      <a href="../articles/Single_Cell_AutoFluorescence.html">Single Cell Autofluorescence</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/DrCytometer/AutoSpectral/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Define Flow Control</h1>
    <small class="dont-index">Source: <a href="https://github.com/DrCytometer/AutoSpectral/blob/HEAD/R/define_flow_control.r" class="external-link"><code>R/define_flow_control.r</code></a></small>
    <div class="hidden name"><code>define.flow.control.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A complex function designed to convert the single-stained control FCS files
and the metadata <code>control.def.file</code> into a data structure for AutoSpectral.
It reads the metadata file, locates the corresponding FCS files, determines
the gates needed based on variables such as beads or cells, <code>large.gate</code>, and
<code>viability.gate</code>, and then creates gates for each combination. It imports
and gates the data in the FCS files and assigns various factors to track
the data.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">define.flow.control</span><span class="op">(</span></span>
<span>  <span class="va">control.dir</span>,</span>
<span>  <span class="va">control.def.file</span>,</span>
<span>  <span class="va">asp</span>,</span>
<span>  gate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-control-dir">control.dir<a class="anchor" aria-label="anchor" href="#arg-control-dir"></a></dt>
<dd><p>File path to the single-stained control FCS files.</p></dd>


<dt id="arg-control-def-file">control.def.file<a class="anchor" aria-label="anchor" href="#arg-control-def-file"></a></dt>
<dd><p>CSV file defining the single-color control file names,
fluorophores they represent, marker names, peak channels, and gating requirements.</p></dd>


<dt id="arg-asp">asp<a class="anchor" aria-label="anchor" href="#arg-asp"></a></dt>
<dd><p>The AutoSpectral parameter list defined
using <code>get.autospectral.param</code>.</p></dd>


<dt id="arg-gate">gate<a class="anchor" aria-label="anchor" href="#arg-gate"></a></dt>
<dd><p>Logical, default is <code>TRUE</code>, in which case, automated gating will
be performed. If <code>FALSE</code>, the FCS files will be imported without automatically
generated gates applied. That is, all data in the files will be used. This is
intended to allow the user to pre-gate the files in commercial software.</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>Logical, default is <code>FALSE</code>, in which case parallel processing
will not be used. Parallel processing will likely be faster when many small
files are read in. If the data is larger, parallel processing may not
accelerate the process much.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical, default is <code>TRUE</code>. Set to <code>FALSE</code> to suppress messages.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list (<code>flow.control</code>) with the following components:</p><ul><li><p><code>filename</code>: Names of the single-color control files.</p></li>
<li><p><code>fluorophore</code>: Corresponding fluorophores used in the experiment.</p></li>
<li><p><code>antigen</code>: Corresponding markers used in the experiment.</p></li>
<li><p><code>control.type</code>: Type of control used (beads or cells).</p></li>
<li><p><code>universal.negative</code>: Corresponding universal negative for each control.</p></li>
<li><p><code>viability</code>: Logical factor; whether a control represents a viability marker.</p></li>
<li><p><code>large.gate</code>: Logical factor; large gate setting.</p></li>
<li><p><code>autof.channel.idx</code>: Index of the autofluorescence marker channel.</p></li>
<li><p><code>event.number.width</code>: Width of the event number.</p></li>
<li><p><code>expr.data.max</code>: Maximum expression data value.</p></li>
<li><p><code>expr.data.max.ceil</code>: Ceiling of the maximum expression data value.</p></li>
<li><p><code>expr.data.min</code>: Minimum expression data value.</p></li>
<li><p><code>channel</code>: Preliminary peak channels for the fluorophores.</p></li>
<li><p><code>channel.n</code>: Number of channels.</p></li>
<li><p><code>spectral.channel</code>: Spectral channel information.</p></li>
<li><p><code>spectral.channel.n</code>: Number of spectral channels.</p></li>
<li><p><code>sample</code>: Sample names (fluorophores).</p></li>
<li><p><code>scatter.and.channel</code>: FSC, SSC, and peak channel information.</p></li>
<li><p><code>scatter.and.channel.label</code>: Labels for scatter and channel.</p></li>
<li><p><code>scatter.and.channel.spectral</code>: FSC, SSC, and spectral channels.</p></li>
<li><p><code>scatter.parameter</code>: Scatter parameters used for gating.</p></li>
<li><p><code>event</code>: Event factor.</p></li>
<li><p><code>event.n</code>: Number of events.</p></li>
<li><p><code>event.sample</code>: Sample information for events. Links events to samples.</p></li>
<li><p><code>event.type</code>: Type of events.</p></li>
<li><p><code>expr.data</code>: Expression data used for extracting spectra.</p></li>
</ul></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Oliver Burton, Adrian Liston.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

